<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fechas Acuario Web</title>

    <link rel="icon" type="image/png" href="imagenes/fish-email.png" sizes="128x128" />
    <link rel=" icon" type="image/png" href="imagenes./fish-email.png" sizes="512x512" />
    <link rel="manifest " href="/manifest.json " />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <script src="https://kit.fontawesome.com/0405fb0190.js" crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css?family=Aclonica" rel="stylesheet" />

    <link rel="stylesheet" href="libreria/estilo.css" />

    <style>
        .cabecera {
            display: flex;
            justify-content: flex-start;
            flex-wrap: wrap;
            margin-bottom: 0;
        }
        
        .full-width-line {
            width: 100%;
            height: 2px;
            /* Puedes ajustar la altura de la línea */
            background-color: #000;
            /* Puedes ajustar el color de la línea */
            border: none;
            margin-top: 0;
            /* Ajusta el margen superior si es necesario */
        }
        
        .cabecera h5 {
            margin-bottom: 0;
            /* Elimina el margen inferior */
        }
        
        .btn .col {
            margin-bottom: 0;
        }
        
        .custom-border {
            border: 2px solid darkgray;
            /* Cambia el color y el grosor del borde según sea necesario */
            border-radius: 5px;
            /* Cambia el radio del borde según sea necesario */
        }
        
        #dateInput {
            border: none;
            color: darkgreen;
            font-size: 20px;
        }
        
        [type="number"] {
            font-size: 22px;
        }
        
        .input-group-text {
            font-size: 20px;
        }
        
        .scroll-coment {
            /* overflow: hidden;Oculta la barra de desplazamiento */
            resize: none;
            /* Evita cambiar el tamaño del textarea */
        }
        
        body,
        html {
            height: 100%;
            margin: 0;
        }
        
        .fixed-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }
        
        .content {
            margin-top: 80px;
            /* Ajusta este valor según la altura de tu cabecera fija */
            padding: 5px;
        }
        
        .custom-dropdown-toggle::after {
            display: none;
        }
        
        .h2-container {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .dropdown {
            margin-left: auto;
        }
    </style>
</head>

<body>
    <div class="container-fluid p-2 bg-primary text-white text-center fixed-header">
        <div class="h2-container">
            <image src="imagenes/fish-email.svg" width="42" height="42" />
            <h2 class="roboto-regular p-2 m-0">Toma Datos de Acuario</h2>
            <div class="dropdown">
                <button class="btn btn-link text-white dropdown-toggle custom-dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fa-sharp fa-solid fa-ellipsis-vertical"></i>
        </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton" id="menuCabecera">
                    <li>
                        <a class="dropdown-item" href="#" id="enviar">Enviar por correo</a>
                    </li>
                    <!-- <li>
                        <a class="dropdown-item" href="#" id="obtener">Correos enviados</a>
                    </li> -->
                    <li>
                        <a class="dropdown-item" href="#" id="reiniciar">Reinicar datos</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="content">
        <div class="input-group mt-1 custom-border">
            <!-- Entrada del númewro de acuario -->
            <div style="background-color: #bec6a0" id="contentAcuarios">
                <a class="nav-link dropdown-toggle ms-2 mt-2 roboto-medium" padding-top="20" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" id="acuariosInput" style="width: 140px">
          Selecc. acuario
        </a>
                <ul class="dropdown-menu" id="menuAcuarios">
                    <!-- <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Uno</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">CO2 levadura</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Sin CO2</a>
                    </li> -->
                </ul>
            </div>
            <h5 class="mt-2 ms-1 roboto-medium-italic" id="acuarios">&nbsp;</h5>
            <!-- &nbsp;espacio no rompible -->
        </div>

        <!-- Entrada de la fecha -->
        <div class="input-group custom-border mt-2">
            <span class="input-group-text text-bg-secondary">Fecha</span>
            <input type="date" id="dateInput" class="roboto-medium-italic" />
        </div>

        <div class="input-group mt-2 custom-border">
            <!-- Entrada del pH -->
            <span class="input-group-text text-bg-warning">pH</span>
            <input type="number" step="0.1" value="" min="0" max="10" class="roboto-medium-italic form-control" id="phInput" />
            <!-- Entrada del KH -->
            <span class="input-group-text text-bg-success">KH</span>
            <input type="number" value="" min="0" max="10" step="0.5" class="roboto-medium-italic form-control" id="khInput" />
        </div>

        <div class="input-group mt-2 custom-border">
            <!-- Entrada de la temperatura -->
            <span class="input-group-text text-bg-primary">Temp.</span>
            <input type="number" value="" min="0" max="32" class="roboto-medium-italic form-control" id="tempInput" />
            <!-- Entrada del NO3 -->
            <span class="input-group-text text-bg-danger">NO3</span>
            <input type="number" value="" min="0" max="50" class="roboto-medium-italic form-control" id="no3Input" />
        </div>

        <div class="input-group mt-2 custom-border">
            <!-- Entrada de la Inyección -->
            <div style="background-color: #bec6a0" id="contentInyeccion">
                <a class="nav-link dropdown-toggle ms-2 mt-2 roboto-medium" padding-top="20" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" id="inyInput" style="width: 140px">
          Inyección CO2
        </a>
                <ul class="dropdown-menu" id="menuInyeccion">
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">CO2 bot. pres.</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">CO2 levadura</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Sin CO2</a>
                    </li>
                </ul>
            </div>
            <h5 class="mt-2 ms-5 roboto-medium-italic" id="inyeccion">&nbsp;</h5>
            <!-- &nbsp;espacio no rompible -->
        </div>

        <div class="input-group mt-2 custom-border">
            <!-- Entrada del estado de las plantas -->
            <div style="background-color: #bec6a0" id="contentPlantas">
                <a class="nav-link dropdown-toggle ms-2 mt-2 roboto-medium" padding-top="20" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" id="plantasInput" style="width: 140px">
          Estado plantas
        </a>
                <ul class="dropdown-menu" id="menuPlantas">
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Excelente</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Normal</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Regular</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Mal</a>
                    </li>
                </ul>
            </div>
            <h5 class="mt-2 ms-5 roboto-medium-italic" id="plantas">&nbsp;</h5>
            <!-- &nbsp;espacio no rompible -->
        </div>

        <div class="input-group mt-2 custom-border">
            <!-- Entrada del estado del agua -->
            <div style="background-color: #bec6a0" id="contentAgua">
                <a class="nav-link dropdown-toggle ms-2 mt-2 roboto-medium" padding-top="20" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" id="aguaInput" style="width: 140px">
          Estado del agua
        </a>
                <ul class="dropdown-menu" id="menuAgua">
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Transparente</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Casi transp.</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Turbia</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Muy turbia</a>
                    </li>
                </ul>
            </div>
            <h5 class="mt-2 ms-5 roboto-medium-italic" id="agua">&nbsp;</h5>
            <!-- &nbsp;espacio no rompible -->
        </div>

        <div class="input-group mt-2 custom-border">
            <!-- Entrada de la cantidad de algas -->
            <div style="background-color: #bec6a0" id="contentAlgas">
                <a class="nav-link dropdown-toggle ms-2 mt-2 roboto-medium" padding-top="20" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" id="algasInput" style="width: 140px">
          Estado de algas
        </a>
                <ul class="dropdown-menu" id="menuAlgas">
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Ninguna</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Presencia</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Cubierto</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Muy cubierto</a>
                    </li>
                </ul>
            </div>
            <h5 class="mt-2 ms-5 roboto-medium-italic" id="algas">&nbsp;</h5>
            <!-- &nbsp;espacio no rompible -->
        </div>

        <div class="input-group mt-2 custom-border">
            <!-- Entrada del estado de la superficie del agua -->
            <div style="background-color: #bec6a0" id="contentSup">
                <a class="nav-link dropdown-toggle ms-2 mt-2 roboto-medium" padding-top="20" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" id="supInput" style="width: 140px">
          Estado sup. agua
        </a>
                <ul class="dropdown-menu" id="menuSup">
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Limpia</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Casi limpia</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Sucia</a>
                    </li>
                    <li>
                        <a class="dropdown-item montserrat-medium-italic" href="#">Muy sucia</a>
                    </li>
                </ul>
            </div>
            <h5 class="mt-2 ms-5 roboto-medium-italic" id="superficie">&nbsp;</h5>
            <!-- &nbsp;espacio no rompible -->
        </div>

        <!-- Comentarios***************** -->
        <h6 class="montserrat-regular-italic mt-2 text-primary">comentario 1:</h6>
        <textarea type="text" class="container-fluid georgia-bold-italic h6 scroll-coment border border-2 border-info rounded" rows="4" id="comentario_1"></textarea>
        <h6 class="montserrat-regular-italic mt-2 text-primary">comentario 2:</h6>
        <textarea type="text" class="container-fluid georgia-bold-italic h6 scroll-coment border border-2 border-info rounded" rows="4" id="comentario_2"></textarea>
        <h6 class="montserrat-regular-italic mt-2 text-primary">comentario 3:</h6>
        <textarea type="text" class="container-fluid georgia-bold-italic h6 scroll-coment border border-2 border-info rounded" rows="4" id="comentario_3"></textarea>
        <h6 class="montserrat-regular-italic mt-2 text-primary">comentario 4:</h6>
        <textarea type="text" class="container-fluid georgia-bold-italic h6 scroll-coment border border-2 border-info rounded" rows="4" id="comentario_4"></textarea>
        <h6 class="montserrat-regular-italic mt-2 text-primary">comentario 5:</h6>
        <textarea type="text" class="container-fluid georgia-bold-italic h6 scroll-coment border border-2 border-info rounded" rows="4" id="comentario_5"></textarea>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="customModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalLabel">Título del Modal</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Contenido del modal
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="cancelButton">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="sendEmailButton">Enviar correo</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Botones para enviar el correo -->

    <!-- ********** SCRIPTS ************ -->
    <!-- Iniciar EmailJs -->
    <!-- <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script> -->

    <!-- <script type="text/javascript">
      (function () {
        emailjs.init({
          publicKey: "IZrWZg4ZaagQIFsUX",
        });
      })();
    </script> -->

    <script type="module">
        import { procesarAcuariosJson, procesarInyeccion, procesarPlantas, procesarAlgas, procesarAgua, procesarSup, procesarAcuarios, enviarCorreo, obtenerCorreo } from "./paraEsto.js"; procesarAcuariosJson(); procesarInyeccion(); procesarPlantas(); procesarAlgas();
        procesarAgua(); procesarSup(); procesarAcuarios(); document.getElementById("enviar").addEventListener("click", () => { enviarCorreo(); }); document.getElementById("reiniciar").addEventListener("click", () => { window.location.reload(); });document.getElementById("obtener").addEventListener("click",
        () => { obtenerCorreo(); })
    </script>

    <script>
        // Primer filtro. accordion-button las entradas una a una
        // si se ha hecho una entrada con datos adecuados cambia el color del fondo de titulo del elemento
        // Controla la entrada de la fecha********************
        document
            .getElementById("dateInput")
            .addEventListener("change", (event) => {
                if (event.returnValue) {
                    const elements = document.querySelectorAll("span");
                    elements.forEach((element) => {
                        if (element.textContent.includes("Fecha")) {
                            element.classList.remove("text-bg-secondary");
                            element.classList.add("text-bg-light");
                        }
                    });
                }
            });
        // Controla las entradas del pH********************
        document.getElementById("phInput").addEventListener("input", function(event) {
            let value = this.value;
            // Convertir coma a punto
            if (value.includes(",")) {
                this.value = value.replace(",", ".");
                value = this.value;
            }
            // Validar y ajustar el valor a un solo decimal
            if (value.includes(".")) {
                const parts = value.split(".");
                if (parts[1].length > 1) {
                    value = `${parts[0]}.${parts[1].slice(0, 1)}`;
                }
            }
            // Asegurarse de que 0 inicial se mantenga en caso de valores decimales como "0.5"
            if (value.startsWith(".")) {
                this.value = "0" + value;
                value = this.value;
            }
            // Eliminar ceros a la izquierda, excepto en "0" o "0."
            if (value !== "0" && value !== "0." && value.length > 1) {
                // Convertir a número y volver a cadena para eliminar ceros a la izquierda
                this.value = parseFloat(value).toString();
            }
            if (Number(this.value) < Number(this.min) || this.value == "") this.value = this.min; //Si el número es menor que el mínimo especificado en el input
            if (Number(this.value) > Number(this.max)) this.value = this.max; //Si el número es mayor que el máximo especificado en el input
        });

        document.getElementById("phInput").addEventListener("focus", function() {
            if (this.value === "") {
                this.value = 6;
            }
        });
        document.getElementById("phInput").addEventListener("change", (event) => {
            if (event.returnValue) {
                const elements = document.querySelectorAll("span");
                elements.forEach((element) => {
                    if (element.textContent.includes("pH")) {
                        element.classList.remove("text-bg-warning");
                        element.classList.add("text-bg-light");
                    }
                });
            }
        });
        // Controla las entradas del KH********************
        document.getElementById("khInput").addEventListener("input", function(event) {
            let value = this.value;

            // Convertir coma a punto
            if (value.includes(",")) {
                this.value = value.replace(",", ".");
                value = this.value;
            }
            // Validar y ajustar el valor a un solo decimal
            if (value.includes(".")) {
                const parts = value.split(".");
                if (parts[1].length > 1) {
                    value = `${parts[0]}.${parts[1].slice(0, 1)}`;
                }
            }
            // Asegurarse de que 0 inicial se mantenga en caso de valores decimales como "0.5"
            if (value.startsWith(".")) {
                this.value = "0" + value;
                value = this.value;
            }
            // Eliminar ceros a la izquierda, excepto en "0" o "0."
            if (value !== "0" && value !== "0." && value.length > 1) {
                // Convertir a número y volver a cadena para eliminar ceros a la izquierda
                this.value = parseFloat(value).toString();
            }
            if (Number(this.value) < Number(this.min) || this.value == "") this.value = this.min; //Si el número es menor que el mínimo especificado en el input
            if (Number(this.value) > Number(this.max)) this.value = this.max; //Si el número es mayor que el máximo especificado en el input
        });

        document.getElementById("khInput").addEventListener("focus", function() {
            if (this.value === "") {
                this.value = 2;
            }
        });
        document.getElementById("khInput").addEventListener("change", (event) => {
            if (event.returnValue) {
                const elements = document.querySelectorAll("span");
                elements.forEach((element) => {
                    if (element.textContent.includes("KH")) {
                        element.classList.remove("text-bg-success");
                        element.classList.add("text-bg-light");
                    }
                });
            }
        });

        // Controla las entradas de la temperatura********************
        document.getElementById("tempInput").addEventListener("input", function(event) {
            let value = this.value;
            // Remover cualquier coma ingresada
            if (value.includes(",")) {
                this.value = value.replace(",", "");
                value = this.value;
            }
            // Remover ceros a la izquierda excepto en el valor "0"
            if (value !== "0" && value.length > 1) {
                // Convertir a número entero y volver a cadena para eliminar ceros a la izquierda
                this.value = parseInt(value, 10).toString();
            }
            if (Number(this.value) < Number(this.min) || this.value == "") this.value = this.min; //Si el número es menor que el mínimo especificado en el input
            if (Number(this.value) > Number(this.max)) this.value = this.max; //Si el número es mayor que el máximo especificado en el input
        });

        document.getElementById("tempInput").addEventListener("focus", function() {
            if (this.value === "") {
                this.value = 25;
            }
        });
        document.getElementById("tempInput").addEventListener("change", (event) => {
            if (event.returnValue) {
                const elements = document.querySelectorAll("span");
                elements.forEach((element) => {
                    if (element.textContent.includes("Temp.")) {
                        element.classList.remove("text-bg-primary");
                        element.classList.add("text-bg-light");
                    }
                });
            }
        });

        // Controla las entradas de nitratos********************
        document.getElementById("no3Input").addEventListener("input", function(event) {
            let value = this.value;

            // Remover cualquier coma ingresada
            if (value.includes(",")) {
                this.value = value.replace(",", "");
                value = this.value;
            }

            // Remover ceros a la izquierda excepto en el valor "0"
            if (value !== "0" && value.length > 1) {
                // Convertir a número entero y volver a cadena para eliminar ceros a la izquierda
                this.value = parseInt(value, 10).toString();
            }

            if (Number(this.value) < Number(this.min) || this.value == "") this.value = this.min; //Si el número es menor que el mínimo especificado en el input
            if (Number(this.value) > Number(this.max)) this.value = this.max; //Si el número es mayor que el máximo especificado en el input
        });

        document.getElementById("no3Input").addEventListener("focus", function() {
            if (this.value === "") {
                this.value = 10;
            }
        });

        document.getElementById("no3Input").addEventListener("change", (event) => {
            if (event.returnValue) {
                const elements = document.querySelectorAll("span");
                elements.forEach((element) => {
                    if (element.textContent.includes("NO3")) {
                        element.classList.remove("text-bg-danger");
                        element.classList.add("text-bg-light");
                    }
                });
            }
        });

        // Controla la entrada del número de acuario********************
        document
            .getElementById("menuAcuarios")
            .addEventListener("click", (event) => {
                if (event.returnValue) {
                    const elements = document.querySelectorAll("a");
                    elements.forEach((element) => {
                        if (element.textContent.includes("Selecc. acuario")) {
                            element.classList.add("text-bg-light");
                            document
                                .getElementById("contentAcuarios")
                                .classList.add("text-bg-light");
                        }
                    });
                }
            });
        // Controla las entradas inyección de CO2********************
        document
            .getElementById("menuInyeccion")
            .addEventListener("click", (event) => {
                if (event.returnValue) {
                    const elements = document.querySelectorAll("a");
                    elements.forEach((element) => {
                        if (element.textContent.includes("Inyección CO2")) {
                            element.classList.add("text-bg-light");
                            document
                                .getElementById("contentInyeccion")
                                .classList.add("text-bg-light");
                        }
                    });
                }
            });
        // Controla las entradas del estado de las plantas********************
        document
            .getElementById("menuPlantas")
            .addEventListener("click", (event) => {
                if (event.returnValue) {
                    const elements = document.querySelectorAll("a");
                    elements.forEach((element) => {
                        if (element.textContent.includes("Estado plantas")) {
                            element.classList.add("text-bg-light");
                            document
                                .getElementById("contentPlantas")
                                .classList.add("text-bg-light");
                        }
                    });
                }
            });
        // Controla las entradas del estado del agua********************
        document.getElementById("menuAgua").addEventListener("click", (event) => {
            if (event.returnValue) {
                const elements = document.querySelectorAll("a");
                elements.forEach((element) => {
                    if (element.textContent.includes("Estado del agua")) {
                        element.classList.add("text-bg-light");
                        document
                            .getElementById("contentAgua")
                            .classList.add("text-bg-light");
                    }
                });
            }
        });
        // Controla las entradas de la cantidad de algas********************
        document
            .getElementById("menuAlgas")
            .addEventListener("click", (event) => {
                if (event.returnValue) {
                    const elements = document.querySelectorAll("a");
                    elements.forEach((element) => {
                        if (element.textContent.includes("Estado de algas")) {
                            element.classList.add("text-bg-light");
                            document
                                .getElementById("contentAlgas")
                                .classList.add("text-bg-light");
                        }
                    });
                }
            });
        // Controla las entradas de la superficie del agua********************
        document.getElementById("menuSup").addEventListener("click", (event) => {
            if (event.returnValue) {
                const elements = document.querySelectorAll("a");
                elements.forEach((element) => {
                    if (element.textContent.includes("Estado sup. agua")) {
                        element.classList.add("text-bg-light");
                        document
                            .getElementById("contentSup")
                            .classList.add("text-bg-light");
                    }
                });
            }
        });
    </script>
</body>

</html>