<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar - Mi acuario de Chilches</title>
    <!-- Icono de la página -->
    <link rel="icon" href="icono.ico" type="image/x-icon">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="buscar.css">
    <link rel="stylesheet" href="libreria/estilo.css">
</head>

<body>
    <!-- Cabecera fija -->
    <div class="cabecera d-flex align-items-center justify-content-between px-3 py-1">
        <img src="./imagenes/buscar2.png" alt="Buscar" id="iconoBuscar" class="icono-buscar">
        <h1 id="tituloAcuario" class="fs-6 text-truncate m-0 georgia-bold" style="font-size: 20px !important; margin-right: 15px !important;"></h1>
        <div class="dropdown">
            <button class="btn btn-link text-white custom-dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-align-justify"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
                <li><a id="buscarPlantas/Algas" class="dropdown-item georgia-bold" href="#">Combinación Plantas/Algas</a></li>
                <li><a id="buscarPH" class="dropdown-item georgia-bold" href="#">Conbinación pH</a></li>
                <li><a id="buscarKH" class="dropdown-item georgia-bold" href="#">Conbinación KH</a></li>
                <li><a id="buscarNO3" class="dropdown-item georgia-bold" href="#">Conbinación NO3</a></li>
                <li><a id="buscarTemp" class="dropdown-item georgia-bold" href="#">Conbinación Temperatura</a></li>
                <li><a id="buscarCO2" class="dropdown-item georgia-bold" href="#">Conbinación CO2 disuelto</a></li>
                <li>
                    <hr class="dropdown-divider dropdown-divider-custom">
                </li>
                <li><a class="dropdown-item georgia-bold" href="index_3.html">Volver a la página principal</a></li>
            </ul>
        </div>
    </div>

    <!-- Contenido principal -->
    <main>
        <!-- Formulario de búsqueda -->

        <div id="contenedor-principal" style="margin-top: 5px;">

            <div class="row">
                <div class="col-12">
                    <div class="input-group mb-3">
                        <input type="text" id="inputBusqueda" class="form-control" placeholder="Hasta 3 palabras o frases" aria-label="Buscar en comentarios">
                        <span id="clearBusqueda" class="input-group-text" style="cursor: pointer;">&times;</span>
                        <button id="btnBuscar" class="btn" type="button">Buscar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resultados -->
        <div id="resultados" class="mt-2" style="width: 98%;">
            <!-- Contenedor fijo para instrucciones o fecha -->
            <div id="contenedor-fecha" class="mb-2">
                <p id="instrucciones" class="m-0 roboto-medium-italic">
                    Frases entre "comillas" como palabras independientes. Todas se procesan sin acentos.
                </p>
                <p id="fecha-resultado" class="m-0 roboto-medium-italic" style="display: none;">
                    <!-- Aquí se mostrará la fecha -->
                </p>
            </div>


            <!-- Cuadro de resultados -->
            <div class="comentario-container border rounded p-3">
                <p id="comentarioResultado" class="mb-0 georgia-regular-italic">No hay resultados, realizar una búsqueda.</p>
            </div>
            <!-- Controles de desplazamiento -->
            <div id="control-resultados" class="d-flex justify-content-center align-items-center gap-3 mt-3">
                <button id="btnAnterior" class="btn btn-outline-secondary rounded-circle" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-chevron-left" viewbox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M11.354 1.646a.5.5 0 0 1 0 .708L6.707 7l4.647 4.646a.5.5 0 0 1-.708.708l-5-5a.5.5 0 0 1 0-.708l5-5a.5.5 0 0 1 .708 0z" />
                    </svg>
                </button>
                <span id="contadorResultados" class="badge bg-primary px-3 py-2 select-no">0 / 0</span>
                <button id="btnSiguiente" class="btn btn-outline-secondary rounded-circle" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-chevron-right" viewbox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M4.646 1.646a.5.5 0 0 1 .708 0l5 5a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708L9.293 7 4.646 2.354a.5.5 0 0 1 0-.708z" />
                    </svg>
                </button>
            </div>
            <div id="resultados-extra" class="d-flex justify-content-between align-items-center mt-3 p-2 border rounded">
                <!-- Datos (pH, KH, Temp, NO3, CO2) -->
                <div class="datos">
                    <div class="row">
                        <div class="col">
                            <p class="dato-titulo select-no">pH</p>
                            <p id="valorPH" class="dato-valor montserrat-medium select-no" style="font-size: 13px !important;"></p>
                        </div>
                        <div class="col">
                            <p class="dato-titulo select-no">KH</p>
                            <p id="valorKH" class="dato-valor montserrat-medium select-no" style="font-size: 13px !important;"></p>
                        </div>
                        <div class="col">
                            <p class="dato-titulo select-no">Temp.</p>
                            <p id="valorTemp" class="dato-valor montserrat-medium select-no" style="font-size: 13px !important;"></p>
                        </div>
                        <div class="col">
                            <p class="dato-titulo select-no">NO3</p>
                            <p id="valorNO3" class="dato-valor montserrat-medium select-no" style="font-size: 13px !important;"></p>
                        </div>
                        <div class="col">
                            <p class="dato-titulo select-no">CO2</p>
                            <p id="valorCO2" class="dato-valor montserrat-medium select-no" style="font-size: 13px !important;"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="datos-extra" class="border d-flex flex-column justify-content-between">
                <!-- Contenedor para la Inyección de CO2 -->
                <div class="mb-3 d-flex align-items-center justify-content-start" style="background: #F1F0E8;">
                    <div class="inyeccion-container d-flex align-items-center p-2">
                        <p class="mb-0 me-2 georgia-regular select-no">
                            <strong>Inyección de CO2:</strong>
                        </p>
                        <!-- Imagen de 1px transparente para que no se muestre nada -->
                        <img id="iconoCO2" class="select-no" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" width="35" height="35">
                    </div>
                </div>
                <div class="gauge-section d-flex flex-column justify-content-between">
                    <div class="d-flex flex-row">
                        <div class="col-6" style="background: #B3C8CF;">
                            <div class="gauge-wrapper">
                                <p class="gauge-title select-no">PLANTAS</p>
                                <canvas id="gaugePlantas" class="gauge-container" style="width: 100px;"></canvas>
                                <!-- <p class="gauge-subtitle select-no">&nbsp;</p> -->
                                <div class="gauge-labels">
                                    <span>bien</span>
                                    <span>mal</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-6" style="background: #B3C8CF;">
                            <div class="gauge-wrapper">
                                <p class="gauge-title select-no">ALGAS</p>
                                <canvas id="gaugeAlgas" class="gauge-container"></canvas>
                                <div class="gauge-labels">
                                    <span>ninguna</span>
                                    <span>cubierto</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="col-6" style="background: #B3C8CF; height: 55px;">
                            <div class="gauge-wrapper" style="top: -30px !important;">
                                <p class="gauge-title select-no">AGUA</p>
                                <!-- <div id="gaugeAgua" class="gauge-container" style="height:45px;"></div> -->
                                <canvas id="gaugeAgua" class="gauge-container" style="width: 100px;"></canvas>
                                <div class="gauge-labels">
                                    <span>transp</span>
                                    <span>turbia</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-6" style="background: #B3C8CF; height: 55px;">
                            <div class="gauge-wrapper" style="top: -30px !important;">
                                <p class="gauge-title select-no">SUP AGUA</p>
                                <!-- <div id="gaugeSupAgua" class="gauge-container" style="height:45px;"></div> -->
                                <canvas id="gaugeSupAgua" class="gauge-container" style="width: 100px;"></canvas>
                                <div class="gauge-labels">
                                    <span>limpia</span>
                                    <span>sucia</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Modal información Fecha-->
            <div id="modalInfoBuscar" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <span class="info-icon">ℹ️</span>
                        <h2 id="modal-title">2 abr. 2023</h2>
                        <button class="close-button " onclick="cerrarModal() ">×</button>
                    </div>
                    <div class="modal-body ">
                        <p id="modal-datos" style="text-align: justify; "></p>
                        <p>
                            <span id="modalPH"></span> &nbsp;&nbsp;
                            <span id="modalKH"></span><br>
                            <span id="modalTemp"></span> &nbsp;&nbsp;
                            <span id="modalCO2"></span><br>
                            <span id="modalNO3"></span><br>
                            <span id="modalPlantas"></span> &nbsp;&nbsp;
                            <span id="modalAgua"></span><br>
                            <span id="modalAlgas"></span> &nbsp;&nbsp;
                            <span id="modalSupAgua"></span><br>
                            <span id="modalInyCO2"></span>
                        </p>
                        <p>
                            <span id="modalTendGral"></span><br>
                            <span id="modalTendNO3"></span><br>
                            <span id="modalTendCO2"></span>
                        </p>
                        <textarea readonly id="modal-comments" class="comments-box georgia-medium" style="font-size: 0.88em;"></textarea>
                    </div>
                </div>
            </div>

        </div>

        <!-- Modal único -->
        <div id="modalBusqueda" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <!-- Contenedor del título e icono -->
                    <div class="modal-titulo-container" style="display: flex; align-items: center;">
                        <img src="./imagenes/buscar2.png" alt="Buscar" class="modal-icon">
                        <h2 id="modal-titulo">Seleccionar Plantas y Algas</h2>
                    </div>
                </div>

                <div id="modal-body">
                    <!-- Contenido dinámico del modal -->
                    <div id="modal-content"></div>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <!-- Botón de Cancelar -->
                    <button type="button" id="botonCancelar" class="btn btn-secondary btn-con-sombra" data-bs-dismiss="modal">Cancelar</button>
                    <button id="botonBuscar" class="btn btn-primary btn-con-sombra" onclick="procesarBusqueda()">Buscar</button>
                </div>
            </div>
        </div>



    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="//cdn.rawgit.com/Mikhus/canvas-gauges/gh-pages/download/2.1.7/linear/gauge.min.js"></script>
    <script src="buscar.js"></script>
</body>

</html>